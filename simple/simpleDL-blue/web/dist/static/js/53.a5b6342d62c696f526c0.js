webpackJsonp([53],{uRv5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("72WN"),i=n("ZoQJ"),a={data:function(){return{linkIndex:"",trainingName:"",timeValue:"",modelPrediction:[],pickerOptions:Object(i.i)(),obj:{name:"",start_time:"",end_time:"",status:"",page:0,engine:""},loading:!0,isCount:!1,per:0,total:0,currentPage:1}},created:function(){this.$store.dispatch("getModelstatus"),this.$store.dispatch("getModelengine"),this.getModelPrediction(this.obj)},mounted:function(){this.linkIndex=1},methods:{formatSeconds:i.c,trainingIndex:function(e){return e+1},getModelPrediction:function(e){var t=this;this.$get("/personal/personalmodelprediction",e).then(function(e){if(200===e.code){t.loading=!1,t.modelPrediction=e.data.model_prediction;var n=e.data.total_count,s=e.data.per_page;n<=s?t.isCount=!1:(t.isCount=!0,t.per=s,t.total=n)}else t.$message({message:e.message,type:"error"})})},sortTable:function(e){"descending"===e.order?this.obj.sort="-"+e.prop:this.obj.sort=e.prop,this.modelSearch()},modelReset:function(){var e={name:"",start_time:"",end_time:"",status:"",page:0,engine:""};return this.timeValue="",this.currentPage=1,this.obj=e,this.getModelPrediction(e),e},modelSearch:function(){0===this.timeValue.length?(this.obj.end_time=0,this.obj.start_time=0):(this.obj.start_time=this.timeValue[0],this.obj.end_time=this.timeValue[1]),this.currentPage=1,this.getModelPrediction(this.obj)},modelCurrentChange:function(e){0===this.timeValue.length?(this.obj.end_time=0,this.obj.start_time=0):(this.obj.start_time=this.timeValue[0],this.obj.end_time=this.timeValue[1]),this.obj.page=e,this.getModelPrediction(this.obj)},createModel:function(){this.$router.push({name:"perCreateModel"})},modelDelete:function(e){var t=this;this.$confirm(this.$t("views.dialogText.deleteConfirm"),this.$t("views.dialogText.tip"),{confirmButtonText:this.$t("views.button.sure"),cancelButtonText:this.$t("views.button.cancel"),type:"warning",beforeClose:function(n,s,i){if("confirm"===n){s.confirmButtonLoading=!0;var a={model_id:e};t.$post("/model/modelpredictiondelete",a).then(function(e){s.confirmButtonLoading=!1,200===e.code?(t.$message({message:e.message,type:"success"}),t.getModelPrediction(t.obj),t.$store.dispatch("getPersonalDetails")):t.$message({message:e.message,type:"error"}),s.confirmButtonLoading=!1,i()})}else i()}}).catch(function(){})},stopModel:function(e,t){var n=t.model_id;this.stopDialogSingle(n)},stopDialogSingle:function(e){var t=this;this.$confirm("确定停止该模型预测?","停止模型预测",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(n,s,i){if("confirm"===n){s.confirmButtonLoading=!0;var a={model_id:e};t.$post("personal-space/model-stop",a).then(function(e){200===e.code?t.$message({message:e.msg,type:"success"}):t.$message({message:e.message,type:"error"}),s.confirmButtonLoading=!1,i()})}else i()}}).catch(function(){})}},components:{ViewsPersonalContent:s.a},computed:{modelstatus:function(){return this.$store.getters.postModelstatus},modelengine:function(){return this.$store.getters.postModelengine}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("views-personal-content"),e._v(" "),n("div",{staticClass:"views-project-space"},[n("div",{staticClass:"tab-select"},[n("div",[n("span",{staticClass:"tab-select-title views-text-name"},[e._v(e._s(e.$t("views.modelPrediction.modelJobName")))]),e._v(" "),n("el-input",{staticClass:"views-input-text",attrs:{placeholder:e.$t("views.projectContent.enterContent")},model:{value:e.obj.name,callback:function(t){e.$set(e.obj,"name",t)},expression:"obj.name"}})],1),e._v(" "),n("div",[n("span",{staticClass:"tab-select-title views-text-name"},[e._v(e._s(e.$t("views.development.status")))]),e._v(" "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.obj.status,callback:function(t){e.$set(e.obj,"status",t)},expression:"obj.status"}},e._l(e.modelstatus,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",[n("span",{staticClass:"tab-select-title "},[e._v(e._s(e.$t("views.trainingTask.engineType")))]),e._v(" "),n("el-select",{attrs:{placeholder:e.$t("views.development.pleaseChoose")},model:{value:e.obj.engine,callback:function(t){e.$set(e.obj,"engine",t)},expression:"obj.engine"}},e._l(e.modelengine,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",[n("span",{staticClass:"tab-select-title "},[e._v(e._s(e.$t("views.table.createTime")))]),e._v(" "),n("el-date-picker",{attrs:{type:"daterange",editable:!1,"range-separator":"-","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":e.$t("views.button.startDate"),"end-placeholder":e.$t("views.button.endDate"),"default-time":["00:00:00","23:59:59"]},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),e._v(" "),n("div",[n("el-button",{staticClass:"btn light small",on:{click:e.modelReset}},[e._v(e._s(e.$t("views.button.reset")))]),e._v(" "),n("el-button",{staticClass:"btn light small",on:{click:e.modelSearch}},[e._v(e._s(e.$t("views.button.search")))])],1)]),e._v(" "),n("div",{staticClass:"views-table-btn"},[n("el-button",{staticClass:"view-btn-medium",attrs:{type:"primary"},on:{click:e.createModel}},[e._v(e._s(e.$t("views.modelPrediction.createModel")))])],1),e._v(" "),n("div",{staticClass:"views-table-content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"tab-content",staticStyle:{width:"100%"},attrs:{data:e.modelPrediction,"tooltip-effect":"dark",border:""},on:{"sort-change":e.sortTable}},[n("el-table-column",{attrs:{label:e.$t("views.projectContent.serial"),width:"50",type:"index",index:e.trainingIndex,"header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("views.modelPrediction.modelJobName"),"header-align":"center",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{staticClass:"views-table-link",attrs:{to:{name:"perModelDetails",params:{perModelId:t.row.id}},tag:"a"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("views.development.status"),width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{"text-align":"left"}},["0"===t.row.status?n("i",{staticClass:"iconfont icon-warning views-icon-warning"}):e._e(),e._v(" "),"0"===t.row.status?n("span",[e._v("运行失败")]):e._e(),e._v(" "),"1"===t.row.status?n("i",{staticClass:"iconfont icon-yunhangzhong views-icon-yunhangzhong"}):e._e(),e._v(" "),"1"===t.row.status?n("span",[e._v(e._s(e.$t("views.status.running")))]):e._e(),e._v(" "),"2"===t.row.status?n("i",{staticClass:"iconfont icon-warning views-icon-chuangjian"}):e._e(),e._v(" "),"2"===t.row.status?n("span",[e._v("创建中")]):e._e()])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("views.modelPrediction.useModel"),"header-align":"center",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              "+e._s(t.row.mount_info.model_path.s3_path)+"\n            ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"engine",label:e.$t("views.trainingTask.engineType"),"header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"created_at",sortable:"custom",label:e.$t("views.projectContent.createdTime"),"header-align":"center",align:"center","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:e.$t("views.modelPrediction.serverAddress"),"show-overflow-tooltip":"","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("views.trainingTask.runningTime"),"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.formatSeconds(t.row.used_time))+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"describe",label:e.$t("views.development.remarks"),"show-overflow-tooltip":"","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("views.projectContent.operation"),"header-align":"center",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"views-table-span views-table-margin del",attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.modelDelete(t.row.id)}}},[e._v(e._s(e.$t("views.projectContent.delete")))])]}}])}),e._v(" "),n("div",{attrs:{slot:"empty"},slot:"empty"},[n("div",{staticClass:"views-empty"},[n("span",{staticClass:"views-empty-table"}),e._v(" "),n("p",{staticClass:"views-empty-text"},[e._v(e._s(e.$t("views.table.noData")))])])])],1),e._v(" "),n("div",{staticClass:"views-page"},[e.isCount?n("el-pagination",{attrs:{"page-size":e.per,layout:"prev, pager, next",total:e.total,"current-page":e.currentPage},on:{"current-change":e.modelCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}):e._e()],1)],1)])],1)},staticRenderFns:[]},l=n("C7Lr")(a,o,!1,null,null,null);t.default=l.exports}});