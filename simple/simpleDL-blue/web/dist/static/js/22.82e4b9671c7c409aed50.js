webpackJsonp([22],{QZKG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("ARhN"),o=a.n(s),i={name:"systemMonitoring",data:function(){return{option1:{},option2:{},option3:{},option4:{},option5:{},option6:{},cpuNum:0,cpuAllNum:0,gpuNum:0,gpuAllNum:0,memoryNum:0,memoryAllNum:0,projectAllNum:0,gauge_hart_arr:[],cpuClass:"v-cpu",memoryClass:"v-memory",gpuClass:"v-gpu",bar_pro_sty:"width:82vw;height:60vh;",pie_pro_sty:"width:40vw;height:40vh;"}},methods:{chartInit:function(t){if(t){var e=this.$t("views.systemMonitoring.systemSource.usedPer"),a=this.$t("views.systemMonitoring.project.proNumStr"),s=this.$t("views.systemMonitoring.images.title"),i=this.$t("views.systemMonitoring.storages.title"),r=this.$t("views.systemMonitoring.images.publicImage"),n=this.$t("views.systemMonitoring.images.personalImage"),l=this.$t("views.systemMonitoring.images.projectImage"),u=this.$t("views.systemMonitoring.storages.publicStorage"),m=this.$t("views.systemMonitoring.storages.personalStorage"),c=this.$t("views.systemMonitoring.storages.projectStorage");this.option1=this.gaugeChart(t.gauge[0].name,t.gauge[0].value,e),this.option2=this.gaugeChart(t.gauge[1].name,t.gauge[1].value,e),this.option3=this.gaugeChart(t.gauge[2].name,t.gauge[2].value,"分配率"),this.option4={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",top:"7%",containLabel:!0},dataZoom:[{type:"inside",startValue:0,endValue:14}],xAxis:[{type:"category",data:t.proCount.x,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:a}],series:[{name:a,type:"bar",barWidth:"60%",itemStyle:{color:new o.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#fe7a28"},{offset:.5,color:"#fe9a2a"},{offset:1,color:"#ffbd29"}])},data:t.proCount.value}]},this.option5={title:{text:t.imagesCount.numAll,left:"center",top:"44%",textStyle:{lineHeight:100,fontSize:18,color:"#111"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {d}%"},legendHoverLink:!1,hoverAnimation:!1,series:[{name:s,type:"pie",radius:["50%","65%"],label:{normal:{formatter:"{b|{b} ：}{c} ",rich:{b:{fontSize:16,lineHeight:33}}}},labelLine:{normal:{show:!0}},data:[{value:t.imagesCount.publiceNum,name:r},{value:t.imagesCount.personalNum,name:n},{value:t.imagesCount.projectNum,name:l}]}],color:["#f06966","#83dfc8","#604a61"]},this.option6={title:{text:t.storageCount.allNumStr,left:"center",top:"44%",textStyle:{lineHeight:100,fontSize:18,color:"#111"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {d}%"},legendHoverLink:!1,hoverAnimation:!1,series:[{name:i,type:"pie",radius:["50%","65%"],label:{normal:{formatter:"{b|{b} ：}{c} ",rich:{b:{fontSize:16,lineHeight:33}}}},labelLine:{normal:{show:!0}},data:[{value:t.storageCount.publiceNum,name:u},{value:t.storageCount.personalNum,name:m},{value:t.storageCount.projectNum,name:c}]}],color:["#f7a31c","#2ba1e4","#00b285"]}}},gaugeChart:function(t,e,a){return{tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:t,type:"gauge",splitNumber:10,radius:"96%",detail:{formatter:"{value}%"},title:{fontWeight:"bolder",fontSize:16,color:"auto"},axisLine:{lineStyle:{color:[[.2,"#009d7a"],[.8,"#417ed1"],[1,"#f49900"]],width:20}},axisTick:{splitNumber:5,length:10,lineStyle:{color:"#fff"}},splitLine:{length:20,lineStyle:{color:"#fff"}},data:[{value:e,name:a}]}]}}},created:function(){var t=this,e={};this.$get("/system/hypervisor").then(function(a){t.cpuNum=a.data.cpu_ram_info.cpu_cpu_used,t.cpuAllNum=a.data.cpu_ram_info.cpu_core_total,t.memoryNum=(a.data.cpu_ram_info.mem_used-0).toFixed(2),t.memoryAllNum=(a.data.cpu_ram_info.mem_total-0).toFixed(2),t.gpuNum=a.data.gpu.used,t.gpuAllNum=a.data.gpu.num_all;var s=(t.cpuNum/t.cpuAllNum*100).toFixed(2),o=t.gpuAllNum?parseInt(a.data.gpu.used/a.data.gpu.num_all*100):0,i=(t.memoryNum/t.memoryAllNum*100).toFixed(2);t.gauge_hart_arr[0]={name:"CPU",value:s},t.gauge_hart_arr[1]={name:t.$t("views.systemMonitoring.systemSource.memory"),value:i},t.gauge_hart_arr[2]={name:"GPU",value:o},e.gauge=t.gauge_hart_arr,t.projectAllNum=a.data.project_count_total,e.proCount={x:a.data.user_name,value:a.data.count};var r=t.$t("views.systemMonitoring.images.numAllStr"),n=t.$t("views.systemMonitoring.images.ge"),l=r+"\n"+a.data.count_image_total+n;e.imagesCount={numAll:l,personalNum:a.data.my_image_count_total,projectNum:a.data.project_image_count_total,publiceNum:a.data.public_image_count_total};var u=t.$t("views.systemMonitoring.storages.nunAllStr")+"\n"+a.data.storage_count_total+n;e.storageCount={allNumStr:u,personalNum:a.data.my_storage_count_total,projectNum:a.data.project_storage_count_total,publiceNum:a.data.public_storage_count_total},t.chartInit(e)})}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"systemMonitoringPage"},[a("div",{staticClass:"v-line"},[a("h6",[t._v(t._s(t.$t("views.systemMonitoring.systemSource.title")))]),t._v(" "),a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("div",{staticClass:"title-chart"},[t._v("CPU\n          "),a("span",{staticClass:"real-value"},[t._v(t._s(t.cpuNum)+" Core")]),t._v(" /\n          "),a("span",{staticClass:"total-value"},[t._v(t._s(t.cpuAllNum)+" Core")])]),t._v(" "),a("sedu-echarts",{attrs:{domId:"cpu",cname:t.cpuClass,option:t.option1}})],1),t._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("div",{staticClass:"title-chart"},[t._v(t._s(t.$t("views.systemMonitoring.systemSource.memory"))+"\n          "),a("span",{staticClass:"real-value"},[t._v(t._s(t.memoryNum)+" G")]),t._v(" /\n          "),a("span",{staticClass:"total-value"},[t._v(t._s(t.memoryAllNum)+" G")])]),t._v(" "),a("sedu-echarts",{attrs:{domId:"memory",cname:t.memoryClass,option:t.option2}})],1),t._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("div",{staticClass:"title-chart"},[t._v("GPU\n          "),a("span",{staticClass:"real-value"},[t._v(t._s(t.gpuNum)+" 个")]),t._v(" /\n          "),a("span",{staticClass:"total-value"},[t._v(t._s(t.gpuAllNum)+" 个")])]),t._v(" "),a("sedu-echarts",{attrs:{domId:"gpu",cname:t.memoryClass,option:t.option3}})],1)],1)],1),t._v(" "),a("div",{staticClass:"v-line"},[a("h6",[t._v(t._s(t.$t("views.systemMonitoring.project.title"))+"\n      "),a("span",[t._v(t._s(t.projectAllNum))]),t._v(" "+t._s(t.$t("views.systemMonitoring.project.rightBrackets")))]),t._v(" "),0!=t.projectAllNum?a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:24}},[a("sedu-echarts",{attrs:{domId:"pro-analyse",myStyle:t.bar_pro_sty,option:t.option4}})],1)],1):a("div",[a("div",{staticClass:"views-empty"},[a("span",{staticClass:"views-empty-table"}),t._v(" "),a("p",{staticClass:"views-empty-text"},[t._v(t._s(t.$t("views.table.noData")))])])])],1),t._v(" "),a("div",{staticClass:"v-pie"},[a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:12}},[a("h6",[t._v(t._s(t.$t("views.systemMonitoring.images.title")))]),t._v(" "),a("sedu-echarts",{attrs:{domId:"iamges",myStyle:t.pie_pro_sty,option:t.option5}})],1),t._v(" "),a("div",{staticClass:"middle-line"}),t._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:12}},[a("h6",[t._v(t._s(t.$t("views.systemMonitoring.storages.title")))]),t._v(" "),a("sedu-echarts",{attrs:{domId:"storages",myStyle:t.pie_pro_sty,option:t.option6}})],1)],1)],1)])},staticRenderFns:[]},n=a("C7Lr")(i,r,!1,null,null,null);e.default=n.exports}});