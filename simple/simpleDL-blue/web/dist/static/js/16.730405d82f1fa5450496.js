webpackJsonp([16],{"218X":function(e,t,s){e.exports=s("218X")},"Oke+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("218X"),r={name:"forumSend",data:function(){return{title:"",content:"",loading:!1,type:1,config:{serverUrl:window.Simple.php+"/controller.php",UEDITOR_HOME_URL:"/static/UEditor/",autoHeightEnabled:!1,initialFrameHeight:400,initialFrameWidth:"100%",lang:"en",enableAutoSave:!0},ue:null,userCharacter:""}},components:{VueUeditorWrap:s.n(n).a},methods:{ready:function(e){console.log("你要的实例"+e.key+"在此:",e),this.ue=e},myInit:function(){this.$refs.ueditor.registerButton({name:"test",icon:"./static/test-button.png",tip:"this is a test tip",handler:function(e,t){e.execCommand("inserthtml","<span>text inserted by test button</span>")}})},clearMsg:function(){this.title="",this.content=""},sendMsg:function(){var e=this,t=/^\s*$/g;if(this.content=this.ue.getContent(),console.log(this.content),""===this.title||t.test(this.title)||null==this.title)return this.$message({message:"主题不能为空",type:"warning"}),!1;if(""===this.content||t.test(this.content))return this.$message({message:"内容不能为空或者只有特殊字符",type:"warning"}),!1;this.loading=!0;var s={};s.title=this.title,s.content=this.content,s.type=this.forumaddper.type,this.$post("/forum/saveforum",s).then(function(t){200===t.code?(e.$message({message:t.message,type:"success"}),e.clearMsg(),e.loading=!1,e.$router.go(-1)):e.$message({message:t.message,type:"error"})})},radioChange:function(e){console.log(e)}},created:function(){this.config.lang="zh"===this.$store.getters.language?this.$store.getters.language+"-cn":this.$store.getters.language,this.userCharacter=this.$store.getters.checkUserCharacter,this.$store.dispatch("getforumaddper"),this.type=this.forumaddper},computed:{forumaddper:function(){return this.$store.getters.postForumaddper}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"views-research-forum-send"},[s("div",{staticClass:"title"},[s("div",[e._v("\n      "+e._s(e.$t("views.researchForum.theme"))+"\n      "),s("el-input",{attrs:{placeholder:e.$t("views.researchForum.enter"),maxlength:"80",clearable:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),s("div",[e._v("\n      "+e._s(e.$t("views.researchForum.postType"))+"\n      "),s("el-radio-group",{on:{change:e.radioChange},model:{value:e.forumaddper.type,callback:function(t){e.$set(e.forumaddper,"type",t)},expression:"forumaddper.type"}},e._l(e.forumaddper.data,function(t,n){return s("el-radio",{key:n,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),1)],1)]),e._v(" "),s("vue-ueditor-wrap",{ref:"ueditor",attrs:{destroy:!1,config:e.config,init:e.myInit},on:{ready:e.ready},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),s("div",{staticClass:"controls"},[s("el-button",{staticClass:"btn dark",on:{click:e.clearMsg}},[e._v(e._s(e.$t("views.researchForum.empty")))]),e._v(" "),s("el-button",{staticClass:"btn dark",attrs:{loading:e.loading},on:{click:e.sendMsg}},[e._v(e._s(e.$t("views.researchForum.publish")))])],1)],1)},staticRenderFns:[]},a=s("C7Lr")(r,i,!1,null,null,null);t.default=a.exports}});