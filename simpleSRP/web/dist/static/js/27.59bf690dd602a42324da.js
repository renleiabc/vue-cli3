webpackJsonp([27],{N0Sm:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("IHPB"),o=e.n(n),s=e("aA9S"),i=e.n(s),l={name:"projectList",data:function(){return{linTabData:"",linUrl:"",pageSize:10,tableData1:{msg:[],url:"/system/getpersonallist",loading:!0,Pagination:{page:1,total_count:5},sel:{sort:"-created_at"}}}},methods:{clearNamespace:function(t){var a=this;this.$confirm("是否清理分配的所有资源?","资源清理",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$post("/system/namespacedeleteall",{namespace_name:t.namespace_name,user_id:t.user_id}).then(function(t){200===t.code?(a.$message({type:"success",message:t.message}),a.getActiveTab("tableData1")):a.$message({type:"error",message:t.message})})}).catch(function(){})},getActiveTab:function(t){this.linTabData=t,this.linUrl=this[t].url,this.initMsg()},addSort:function(t,a){"descending"===t.order?this.tableData1.sel.sort="-"+t.prop:this.tableData1.sel.sort=t.prop,this.getActiveTab(a)},changePage:function(t){this.getActiveTab(t)},initMsg:function(){var t=this;this[this.linTabData].loading=!0;var a={};void 0!==this[this.linTabData].Pagination&&(a=i()({},this[this.linTabData].Pagination,{count:this.pageSize})),this.$axios.get(this[this.linTabData].url,{params:a}).then(function(a){var e=a.data.data.list;t[t.linTabData].msg=[].concat(o()(e)),void 0!==t[t.linTabData].Pagination&&(t[t.linTabData].Pagination.total_count=a.data.data.total_count),t.pageSize=a.data.data.per_page||10,t[t.linTabData].loading=!1})}},created:function(){this.getActiveTab("tableData1")}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"views-cluster-monitoring-node-control"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableData1.loading,expression:"tableData1.loading"}],staticClass:"tab-content",attrs:{data:t.tableData1.msg,border:""},on:{"sort-change":function(a){return t.addSort(a,"tableData1")}}},[e("el-table-column",{attrs:{type:"index",label:t.$t("views.systemMonitoring.serialNumber"),width:"80",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("views.systemMonitoring.userName"),prop:"user_name","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"personal_cpu_use","show-overflow-tooltip":"",align:"center",label:t.$t("views.systemMonitoring.CPU")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        "+t._s(a.row.personal_cpu_use?a.row.personal_cpu_use:0)+"核/"+t._s(a.row.personal_cpu_total?a.row.personal_cpu_total:0)+"核\n      ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"personal_memory_use","show-overflow-tooltip":"",align:"center",label:t.$t("views.systemMonitoring.RAM")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        "+t._s(a.row.personal_memory_use?a.row.personal_memory_use:0)+"G/"+t._s(a.row.personal_memory_total?a.row.personal_memory_total:0)+"G\n      ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"personal_gpu_use","show-overflow-tooltip":"",align:"center",label:t.$t("views.systemMonitoring.GPU")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        "+t._s(a.row.personal_gpu_use?a.row.personal_gpu_use:0)+"个/"+t._s(a.row.personal_gpu_total?a.row.personal_gpu_total:0)+"个\n      ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"created_at",sortable:"","show-overflow-tooltip":"",align:"center",label:t.$t("views.systemMonitoring.allocationTime")}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("views.systemMonitoring.operation"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("button",{staticClass:"btn",on:{click:function(e){return t.clearNamespace(a.row)}}},[t._v("清理")])]}}])}),t._v(" "),e("div",{attrs:{slot:"empty"},slot:"empty"},[e("div",{staticClass:"views-empty"},[e("span",{staticClass:"views-empty-table"}),t._v(" "),e("p",{staticClass:"views-empty-text"},[t._v(t._s(t.$t("views.table.noData")))])])])],1),t._v(" "),e("el-pagination",{staticClass:"tab-page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.tableData1.Pagination.page,total:t.tableData1.Pagination.total_count},on:{"update:currentPage":function(a){return t.$set(t.tableData1.Pagination,"page",a)},"update:current-page":function(a){return t.$set(t.tableData1.Pagination,"page",a)},"current-change":function(a){return t.changePage("tableData1")}}})],1)},staticRenderFns:[]},c=e("C7Lr")(l,r,!1,null,null,null);a.default=c.exports}});